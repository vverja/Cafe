
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Свойство("АвтоТест") Тогда // Возврат при получении формы для анализа.
		Возврат;
	КонецЕсли;

	ОбновлениеИнформационнойБазы.ПроверитьОбъектОбработан(Запись, ЭтотОбъект);
	
	Если Запись.КонтролироватьАссортимент Тогда
	
		Элементы.ФорматМагазина.АвтоОтметкаНезаполненного = Истина;
		Элементы.ФорматМагазина.АвтоВыборНезаполненного = Истина;
	
	Иначе
	
		Элементы.ФорматМагазина.АвтоОтметкаНезаполненного = Ложь;
		Элементы.ФорматМагазина.АвтоВыборНезаполненного = Ложь;
	
	КонецЕсли;
	
	ТипСклада = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(Запись.Склад, "ТипСклада");
	ЭтоРозничныйСклад = (ТипСклада = Перечисления.ТипыСкладов.РозничныйМагазин);
	
	Элементы.КонтролироватьАссортимент.Доступность = ЭтоРозничныйСклад;
	
	СобытияФорм.ПриСозданииНаСервере(ЭтаФорма, Отказ, СтандартнаяОбработка);
	
КонецПроцедуры

&НаСервере
Процедура ПриЧтенииНаСервере(ТекущийОбъект)
	
	ТипСклада = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(Запись.Склад, "ТипСклада");
	ЭтоРозничныйСклад = (ТипСклада = Перечисления.ТипыСкладов.РозничныйМагазин);
	
	Элементы.КонтролироватьАссортимент.Доступность = ЭтоРозничныйСклад;
	
	МодификацияКонфигурацииПереопределяемый.ПриЧтенииНаСервере(ЭтаФорма, ТекущийОбъект);
	
КонецПроцедуры

&НаСервере
Процедура ПередЗаписьюНаСервере(Отказ, ТекущийОбъект, ПараметрыЗаписи)
	
	МодификацияКонфигурацииПереопределяемый.ПередЗаписьюНаСервере(ЭтаФорма, Отказ, ТекущийОбъект, ПараметрыЗаписи);
	
КонецПроцедуры

&НаСервере
Процедура ПослеЗаписиНаСервере(ТекущийОбъект, ПараметрыЗаписи)
	
	МодификацияКонфигурацииПереопределяемый.ПослеЗаписиНаСервере(ЭтаФорма, ТекущийОбъект, ПараметрыЗаписи);
	
КонецПроцедуры

&НаКлиенте
Процедура ПослеЗаписи(ПараметрыЗаписи)
	
	МодификацияКонфигурацииКлиентПереопределяемый.ПослеЗаписи(ЭтаФорма, ПараметрыЗаписи);
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийЭлементовШапкиФормы

&НаКлиенте
Процедура КонтролироватьАссортиментПриИзменении(Элемент)
	
	Если Запись.КонтролироватьАссортимент Тогда
	
		Элементы.ФорматМагазина.АвтоОтметкаНезаполненного = Истина;
		Элементы.ФорматМагазина.АвтоВыборНезаполненного = Истина;
	
	Иначе
	
		Элементы.ФорматМагазина.АвтоОтметкаНезаполненного = Ложь;
		Элементы.ФорматМагазина.АвтоВыборНезаполненного = Ложь;
	
	КонецЕсли; 
	
КонецПроцедуры

&НаКлиенте
Процедура СкладПриИзменении(Элемент)
	СкладПриИзмененииНаСервере();
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура Подключаемый_ВыполнитьПереопределяемуюКоманду(Команда)
	
	СобытияФормКлиент.ВыполнитьПереопределяемуюКоманду(ЭтаФорма, Команда);
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаСервере
Процедура СкладПриИзмененииНаСервере()
	
	ТипСклада = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(Запись.Склад, "ТипСклада");
	ЭтоРозничныйСклад = (ТипСклада = Перечисления.ТипыСкладов.РозничныйМагазин);
	
	Элементы.КонтролироватьАссортимент.Доступность = ЭтоРозничныйСклад;
	
	Если Запись.КонтролироватьАссортимент И НЕ ЭтоРозничныйСклад Тогда
	
		Запись.КонтролироватьАссортимент = Ложь;
	
	КонецЕсли; 
	
КонецПроцедуры

#КонецОбласти

