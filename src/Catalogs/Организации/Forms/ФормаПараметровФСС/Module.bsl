&НаКлиенте
Перем ВыполняетсяЗакрытие;

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Свойство("АвтоТест") Тогда // Возврат при получении формы для анализа.
		Возврат;
	КонецЕсли;

	ВидОрганизации 						= Параметры.ВидОрганизации;
	
	НомерФСС 							= Параметры.НомерФСС;
	НомерФССУ 							= Параметры.НомерФССУ;
	НазваниеРабочегоОрганаФонда 		= Параметры.НазваниеРабочегоОрганаФонда;
	ФИОДиректораФонда 					= Параметры.ФИОДиректораФонда;
	НомерФССНесчСлучай 					= Параметры.НомерФССНесчСлучай;
	НомерРегистрацииВСлужбеЗанятости	= Параметры.НомерРегистрацииВСлужбеЗанятости;
	ОрганСоциальнойЗащитыНаселения		= Параметры.ОрганСоциальнойЗащитыНаселения;
	
	УстановитьДоступностьЭлементовФормы(ЭтаФорма);
	
КонецПроцедуры

&НаКлиенте
Процедура ПередЗакрытием(Отказ, СтандартнаяОбработка)
	
	Если Модифицированность И НЕ ВыполняетсяЗакрытие Тогда
		
		ПоказатьВопрос(Новый ОписаниеОповещения("ПередЗакрытиемЗавершение", ЭтотОбъект), 
			НСтр("ru='Данные были изменены. Сохранить изменения?';uk='Дані були змінені. Зберегти зміни?'"), 
			РежимДиалогаВопрос.ДаНетОтмена);
		
		Отказ = Истина;
		
	КонецЕсли;
	
КонецПроцедуры

&НаКлиенте
Процедура ПередЗакрытиемЗавершение(РезультатВопроса, ДополнительныеПараметры) Экспорт
	
	Если РезультатВопроса = КодВозвратаДиалога.Отмена Тогда
		
		Возврат;
		
	ИначеЕсли РезультатВопроса = КодВозвратаДиалога.Да Тогда
		
		Если ПроверитьЗаполнение() Тогда
			ВыполняетсяЗакрытие = Истина;
			ЗаписатьЗакрыть();
		Иначе
			Возврат;
		КонецЕсли;
		
	КонецЕсли;
	
	ВыполняетсяЗакрытие = Истина;
	Закрыть();

КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ЭЛЕМЕНТОВ ШАПКИ ФОРМЫ

&НаКлиенте
Процедура НомерФССПриИзменении(Элемент)
	Модифицированность = Истина;
КонецПроцедуры

&НаКлиенте
Процедура НомерФССУПриИзменении(Элемент)
	Модифицированность = Истина;
КонецПроцедуры

&НаКлиенте
Процедура НазваниеРабочегоОрганаФондаПриИзменении(Элемент)
	Модифицированность = Истина;
КонецПроцедуры

&НаКлиенте
Процедура ФИОДиректораФондаПриИзменении(Элемент)
	Модифицированность = Истина;
КонецПроцедуры

&НаКлиенте
Процедура НомерФССНесчСлучайПриИзменении(Элемент)
	Модифицированность = Истина;
КонецПроцедуры

&НаКлиенте
Процедура НомерРегистрацииВСлужбеЗанятостиПриИзменении(Элемент)
	Модифицированность = Истина;
КонецПроцедуры

&НаКлиенте
Процедура ОрганСоциальнойЗащитыНаселенияПриИзменении(Элемент)
	Модифицированность = Истина;
КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ КОМАНД ФОРМЫ

&НаКлиенте
Процедура ОК(Команда) 
	
	ЗаписатьЗакрыть();	
	
КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// СЛУЖЕБНЫЕ ПРОЦЕДУРЫ И ФУНКЦИИ

&НаКлиентеНаСервереБезКонтекста
Процедура УстановитьДоступностьЭлементовФормы(Форма)
	
КонецПроцедуры

&НаКлиенте
Процедура ЗаписатьЗакрыть()
	
	Модифицированность = Ложь;
	
	СтруктураПараметров = Новый Структура;
	СтруктураПараметров.Вставить("НомерФСС", НомерФСС);	
	СтруктураПараметров.Вставить("НомерФССУ", НомерФССУ);	
	СтруктураПараметров.Вставить("НазваниеРабочегоОрганаФонда", НазваниеРабочегоОрганаФонда);	
	СтруктураПараметров.Вставить("ФИОДиректораФонда", ФИОДиректораФонда);	
	СтруктураПараметров.Вставить("НомерФССНесчСлучай", НомерФССНесчСлучай);	
	СтруктураПараметров.Вставить("НомерРегистрацииВСлужбеЗанятости", НомерРегистрацииВСлужбеЗанятости);	
	СтруктураПараметров.Вставить("ОрганСоциальнойЗащитыНаселения", ОрганСоциальнойЗащитыНаселения);	
	
	Закрыть(СтруктураПараметров);
КонецПроцедуры

ВыполняетсяЗакрытие = Ложь;