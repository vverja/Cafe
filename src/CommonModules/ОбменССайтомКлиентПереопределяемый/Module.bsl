#Область ПрограммныйИнтерфейс

// Процедура, вызываемая из одноименного обработчика события формы узла плана обмена "Обмен с сайтом".
//
// Параметры:
//  Форма - форма, из обработчика события которой происходит вызов процедуры.
//  Отказ - Булево - признак отказа от выполнения действия.
//
Процедура ФормаУзлаПриОткрытии(Форма, Отказ) Экспорт
	
	ОбменССайтамиУТКлиент.УстановитьПараметрыТаблицыКаталогов(Форма);
	
КонецПроцедуры

// Процедура, вызываемая из одноименного обработчика события формы узла плана обмена "Обмен с сайтом".
//
// Параметры:
//  Форма - форма, из обработчика события которой происходит вызов процедуры.
//  Отказ - Булево - признак отказа от выполнения действия.
//  ПараметрыЗаписи - Структура, содержащая параметры записи. 
//
Процедура ФормаУзлаПередЗаписью(Форма, Отказ, ПараметрыЗаписи) Экспорт
	
	Если НЕ Форма.ВыгружатьЦеныОстатки Тогда
		Форма.СписокТочекСамовывоза.Очистить();
	КонецЕсли;
	
	Если Не Форма.ВыгружатьТовары Тогда
		Форма.Объект.ВыгружатьКартинки            = Ложь;
		Форма.ВыгружатьФайлы                      = Ложь;
		Форма.КлассифицироватьПоВидамНоменклатуры = Ложь;
		
		ОбменССайтамиУТКлиент.УстановитьПараметрыТаблицыКаталогов(Форма);
		ОбменССайтамиУТКлиент.ИзменитьТипЗначенийСпискаГруппТаблицыКаталогов(Форма);
		
	КонецЕсли;
	
	Если НЕ (Форма.ИспользуютсяГруппыДоступаПартнеров 
	        И (Форма.ИспользоватьПартнеровКакКонтрагентов
	         ИЛИ Форма.СоздаватьПартнеровДляНовыхКонтрагентов)) Тогда
		
		Форма.ГруппаДоступаПартнеров = ПредопределенноеЗначение("Справочник.ГруппыДоступаПартнеров.ПустаяСсылка");
		
	КонецЕсли;
	
КонецПроцедуры

// Процедура меняет тип значения колонки "Группы" таблицы каталога товаров
//
Процедура ОпределитьТипГруппТаблицыКаталога(ТипЗначений, Форма) Экспорт
	
	Если Форма.КлассифицироватьПоВидамНоменклатуры Тогда
		ТипЗначений = Новый ОписаниеТипов("СправочникСсылка.ВидыНоменклатуры");
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти
