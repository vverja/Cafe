<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html><head><meta localizatorhash="FAB27DD61AAC9C1FE7EA30B9B8AA3D46" content="text/html;charset=utf-8" http-equiv="content-type"></meta><link rel="stylesheet" type="text/css" href="v8help://service_book/service_style"></link><meta localizatorhash="FAB27DD61AAC9C1FE7EA30B9B8AA3D46" name="GENERATOR" content="MSHTML 11.00.10240.17443"></meta></head><body>
<p>Пошук і установка оновлень дозволяє отримувати інформацію про останні оновлення на користувацькому сайті в мережі Інтернет і автоматично їх встановлювати.</p>
<p>Відкривається по команді <strong>Пошук і установка оновлень</strong> розділу <strong>НДІ і Адміністрування - Підтримка і обслуговування</strong>.</p>
<p>Програма дозволяє оновлювати конфігурацію ІБ в користувацькому режимі. Оновлення проводиться на вимогу або в зазначений час.</p>
<p>Увага! Помічник не слід використовувати, якщо в програмі включена можливість зміни об'єктів метаданих. У таких випадках рекомендується виконувати оновлення в режимі <strong>Конфігуратор</strong>. </p>
<p>За допомогою перемикача<strong> Вибір джерела отримання оновлення</strong> вкажіть, як отримати оновлення:</p>
<ul><li><a href="#1">Автоматичний пошук оновлення в Інтернеті</a>- оновлення через сайт ІТС (рекомендується); </li><li><a href="#2">Локальний або мережевий каталог</a> з файлу оновлення в локальному або мережевому каталозі. <p>Якщо у Вас вже є файл оновлення, то помічник дозволяє провести оновлення з використанням файлу постачання оновлення (.cfu) або файлу поставки конфігурації (.cf) з локального або мережевого каталогу. Якщо файл оновлення вже завантажений в основну конфігурацію, і вона відрізняється від конфігурації інформаційної бази, то необхідно вказати варіант оновлення без використання файлу оновлення.</p></li></ul><h3><a name="#1">Отримання оновлень через Інтернет</a></h3>
<p>На першій сторінці помічника виберіть варіант <strong>Автоматичний пошук оновлення в Інтернеті</strong> <strong>(рекомендується)</strong>. Якщо на користувацькому сайті є доступне оновлення, то програма повідомляє номер версії, короткий опис, розмір оновлення і пропонує його встановити. </p>
<p>Програма може автоматично перевіряти наявність оновлень конфігурації на користувацькому сайті при кожному запуску за розкладом, і далі оновлювати конфігурацію також автоматично. Стан автоматичної перевірки оновлення в Інтернеті відображається посиланням в нижній частині вікна <strong>Помічника поновлення конфігурації</strong>. Для <a href="DataProcessor.ПоискИУстановкаОбновлений.Form.НастройкаРасписания/Help">настройки автоматичної перевірки оновлення в Інтернеті</a> перейдіть за посиланням.</p>
<p>Оновлення конфігурації через Інтернет включає кілька кроків:</p>
<ul><li>Підключення до користувацького сайту; <ul><li>При першому оновленні з користувацького сайту необхідно вказати <strong>Код користувача</strong> і <strong>Пароль </strong>для доступу. Доступ до отримання оновлень мають тільки зареєстровані користувачі. За посиланням <strong>Як отримати код користувача і пароль</strong> перейдіть Для отримання докладної інформації про реєстрацію. Детальна інформація про те, як можна отримати код користувача і пароль, міститься на сайті <a href="http://its.bas-soft.eu/db/aboutitsu#content:20:hdoc">http://its.bas-soft.eu/db/aboutitsu#content:20:hdoc.</a> Код користувача запам'ятовується автоматично. Увімкніть прапорець <strong>Запам'ятати пароль</strong>, для того щоб зберегти пароль в програмі. </li><li>Якщо не вдалося з цими реєстраційними даними отримати доступ, виводиться відповідне попередження. По посиланню <strong>Як оформити підписку на ІТС</strong> можна отримати інформацію про Інформаційно-технологічний супровід (ІТС).</li></ul></li><li>Отримання інформації про наявність оновлень конфігурації; <ul><li>Якщо в результаті перевірки оновлення буде виявлено, можна ознайомитися з його коротким описом. Виводиться інформація про доступну версію програми, для порівняння виводиться номер версії поточної конфігурації і поточна версія програми. Перейдіть за посиланням <strong>Нове у версії</strong>, щоб ознайомитися зі змінами. </li><li>Перевіряється необхідна версія платформи для нової версії конфігурації. Якщо версія платформи застаріла, то виводиться рекомендація перейти на більш свіжу версію платформи. </li><li>Скористайтесь посиланням <strong>Перейти на нову версію платформи</strong>, для того щоб встановити нову версію платформи. </li><li>Перейдіть за посиланням <strong>Порядок оновлення</strong>, для того щоб уточнити всі деталі оновлення. </li><li>Якщо встановлена остання версія програми, то виводиться повідомлення, що оновлення не потрібне. </li><li>Для отримання оновлення з користувацького сайту натисніть <strong>Далі</strong>;</li></ul></li><li>Отримання файлу оновлення. <ul><li>Після натискання на кнопку <strong>Далі</strong> програма встановлює з'єднання з користувацьким сайтом, використовуючи вказані код користувача та пароль, і отримує файл оновлення локально на комп'ютер, який буде збережено у каталозі шаблонів. </li><li>Процес отримання файлу оновлення з користувацького сайту може зайняти тривалий час. Воно залежить від обсягу конкретного файлу оновлення і швидкості підключення до мережі Інтернет. Час завантаження оновлень може збільшитися, якщо потрібно отримати з веб-сайту не одне, а кілька проміжних оновлень для поточної версії програми. В цьому випадку всі оновлення будуть послідовно отримані і встановлені автоматично. Оновлення можна виконати відразу або при наступному запуску помічника. </li></ul></li></ul><p class="Important">У деяких організаціях для з'єднання з Інтернетом використовується проксі-сервер. За командою <strong>Настройка параметрів проксі</strong> можна вказати <a href="CommonForm.ПараметрыПроксиСервера/Help">параметри проксі-сервера</a>. Так як доступ в мережу здійснюється з клієнтського робочого місця, то і настройка проксі-сервера зберігаються для нього. У цьому випадку потрібно вказати ім'я користувача та пароль для доступу на проксі-сервер. Докладну інформацію про використання проксі-сервера можна отримати в адміністратора вашої локальної мережі.</p>
<h3><a name="#2">Отримання оновлень з файлу в локальному або мережевому каталозі</a></h3>
<p>У разі якщо файл оновлення вже є, то слід скористатися режимом оновлення конфігурації з файлу. </p>
<ul><li>На першій сторінці помічника виберіть як спосіб отримання оновлення варіант <strong>Локальний або мережевий каталог</strong>. </li><li>Натисніть кнопку <strong>Далі </strong>для переходу до зазначення шляху до файлу оновлення. На першій сторінці помічник просить вказати, де саме знаходиться файл з оновленнями: </li><li><strong>Файл оновлення не потрібний, так як він вже завантажений в основну конфігурацію</strong>. <ul><li>Якщо файл оновлення вже був завантажений в основну конфігурацію, і його необхідно застосувати до конфігурації інформаційної бази, то слід вибрати цей варіант. Ця можливість може бути затребувана, наприклад, при оновленні конфігурації вузла розподіленої інформаційної бази.</li></ul></li><li><strong>Вкажіть файл оновлення</strong>-за допомогою кнопки <img src="StdPicture.Select"></img><strong>Вибрати</strong> вкажіть шлях до файлу на комп'ютері. <ul><li>Як файл може бути вказаний cfu-файл оновлення конфігурації або cf-файл поставки конфігурації, наприклад, <strong>E:\Its\EXE\Migration\1Cv8.cf</strong>. </li><li>Натисніть <strong>Далі</strong>, для того щоб продовжити установку оновлень.</li></ul></li><li>Після натискання на кнопку <strong>Далі</strong> програма отримує файл оновлення з локального або мережного каталогу локально на комп'ютер. </li></ul><h3>Встановлення оновлень </h3>
<p>Після того, як оновлення було отримано локально на комп'ютер, помічник пропонує його встановити. </p>
<ul><li>Установка оновлення виконується від імені поточного користувача. Введіть <strong>Параметри адміністрування інформаційної бази - Ім'я користувача</strong> і <strong>Пароль</strong>, якщо для доступу до інформаційної бази необхідна авторизація. У разі клієнт-серверного варіанту роботи програми також може знадобитися ввести ім'я і пароль адміністратора кластера серверів. </li><li>Перед початком оновлення версії програми рекомендується створювати <a href="DataProcessor.ПоискИУстановкаОбновлений.Form.НастройкаРезервнойКопии/Help">резервну копію</a> інформаційної бази. Резервна копія використовується для автоматичного відновлення інформаційної бази в разі нештатної ситуації. До настройки автоматичного створення резервної копії у файловому варіанті роботи можна перейти за посиланням <strong>Створювати тимчасову резервну копію ІБ і виконувати відкат за нештатної ситуації</strong>. <ul><li>Якщо для резервного копіювання використовуються сторонні кошти, то можна відключити автоматичне створення резервної копії за допомогою посилання <strong>Створювати тимчасову резервну копію ІБ і виконувати відкат за нештатної ситуації</strong>, розташованої внизу сторінки помічника. Створити резервну копію можна й іншими засобами, наприклад, шляхом копіювання файлу інформаційної бази. У клієнт-серверному варіанті роботи рекомендується створити резервну копію самостійно засобами SQL-сервера.</li></ul></li><li>За допомогою перемикача можна уточнити час оновлення конфігурації ІБ: <ul><li><strong>Виконати установку оновлення прямо зараз</strong> - для оновлення потрібний перезапуск. </li><li><strong>Нагадати при завершенні роботи</strong>. </li><li><strong>Запланувати встановлення оновлення на вказаний час</strong> - в клієнт-серверному варіанті роботи програми є можливість <a href="#3">вказати час і дату оновлення конфігурації</a>. </li></ul></li><li>Перш ніж продовжити оновлення конфігурації, необхідно зберегти незбережені дані або закрити вікна їх редагування. </li><li>У клієнт-серверному варіанті роботи програми всі з'єднання будуть завершені автоматично, а на час створення резервної копії та відновлення конфігурації встановлюється блокування з'єднать. </li><li>Для файлового варіанту роботи необхідно виконати наступні дії: <ul><li>Якщо відкритий конфігуратор, то необхідно його закрити. </li><li><a href="DataProcessor.БлокировкаРаботыПользователей/Help">Завершити клієнтські сеанси</a>. Для того щоб <a href="DataProcessor.АктивныеПользователи/Help">проконтролювати поточні сеанси</a>, перейдіть за посиланням <strong>Подивитися список активних користувачів</strong>. </li><li>Якщо до програми підключені інші програми в режимі зовнішнього з'єднання, то необхідно завершити їх роботу.</li></ul></li><li>Якщо всі ці умови виконані, після натискання кнопки <strong>Далі</strong> програма автоматично створить резервну копію ІБ (якщо це передбачено), і оновить конфігурацію. </li><li>Процес оновлення програми може зайняти тривалий час, в залежності від продуктивності комп'ютера і обсягу інформаційної бази. Не вимикайте живлення комп'ютера до завершення процесу. </li><li>Після завершення оновлення конфігурації програма буде автоматично запущена і готова до подальшої роботи. Для базових версій конфігурацій після оновлення потрібно виконати перший запуск програми від імені адміністратора, під час якого буде виконано завершення процесу оновлення конфігурації. </li><li>Помічник виводить повідомлення про успішне завершення оновлення програми. Перейдіть за посиланням <strong>Нове в цій версії</strong>, для того щоб переглянути <a href="CommonForm.ОписаниеИзмененийПрограммы/Help">опис змін програми</a>. Натисніть <strong>Готово</strong>, для того щоб приступити до роботи в програмі. </li><li>Якщо в програмі передбачено <a href="DataProcessor.РезультатыОбновленияПрограммы.Form.ИндикацияХодаОтложенногоОбновленияИБ/Help">відкладене оновлення</a>, виводиться попередження про необхідність ознайомитись <strong>з додатковими інструкціями</strong> для завершення оновлення. Перейдіть за відповідним посиланням.</li></ul><h3><a name="#3">Планування оновлень</a></h3>
<ul><li>При роботі в клієнт-серверному варіанті роботи програми можна задавати відкладене в часі оновлення, наприклад, можна відкласти оновлення конфігурації на ніч. </li><li>Для цього при оновленні конфігурації в помічнику виберіть за допомогою перемикача <strong>Запланувати установку оновлення на вказаний час</strong> і вкажіть час і дату оновлення. </li><li>Існує можливість настроїти відправку звіту на вказану адресу електронної пошти про успішне чи неуспішним виконання оновлення. Відправлення повідомлення проводиться з комп'ютера, на якій встановлений сервер платформи. Для цього увімкніть прапорець <strong>Надіслати звіт на пошту</strong>, напишіть адресу електронної пошти.</li></ul><p class="Important">Заплановане оновлення буде виконано з клієнтського комп'ютера у фоновому режимі. Живлення комп'ютера повинно бути включено в зазначену дату і час.</p>
<h3>Проблеми отримання і установки оновлень</h3>
<p>На спеціальній сторінці помічника <strong>Не вдалося підключитися до мережі Інтернет</strong> виводиться повідомлення про неможливість проведення оновлення програми.</p>
<ul><li>При отриманні оновлень через Інтернет помилка виду "Помилка при отриманні файлу з сервера" означає, що з'єднання з Інтернетом відсутнє або заблоковано по ряду причин: <ul><li>
<div>немає підключення до мережі Інтернет;</div>
</li><li>
<div>через особливості інтернет-провайдера (використання різних IP адрес при вході на сайт і при завантаженні файлу); </div>
</li><li>
<div>на веб-сайті виникли проблеми;</div>
</li><li>
<div>через роботу встановленого брандмауера (firewall) або антивіруса, що блокує звернення до Інтернет-сервера оновлень; </div>
</li><li>
<div>через особливості настройки локальної мережі (наприклад, при використанні проксі-сервера). За допомогою відповідної кнопки можна <strong>Настройка параметри проксі-сервера</strong>;</div>
</li><li>
<div>інші причини з настройками комп'ютера, не пов'язані з коректністю роботи Інтернет-ресурсів з оновленнями.</div></li></ul></li></ul><ul><li>Для отримання технічної інформації про причини проблем з отриманням і установкою оновлень можна скористатися наступними засобами: <ul><li>Записи про проведені операції і помилки, що виникли в ході оновлення заносяться в <strong>Журнал реєстрації</strong> (тип події «Оновлення інформаційної бази»). Скористайтесь посиланням <strong>Перейти в журнал реєстрації</strong>, для того щоб переглянути <a href="DataProcessor.ЖурналРегистрации/Help">технічні подробиці</a>. </li><li>В процесі установки оновлення в тимчасовій папці поточного користувача Windows створюється лог-файл з записами про хід оновлення (вміст лог-файлу згодом автоматично додається в <strong>Журнал реєстрації</strong>). Останній з каталогів виду <strong>%temp%\1CUpdate.&lt; набір цифр&gt;,</strong> відсортованих за алфавітом, відповідає останній сесії оновлення. </li></ul></li></ul><blockquote style="MARGIN-RIGHT: 0px" dir="ltr">
<p class="Important">Якщо настройка операційної системи "Мова програм, що не підтримують Юнікод" задана некоректно, то процес оновлення завершиться з помилкою "invalid procedure call or arguments", при цьому лог-файл виявиться порожнім. Для усунення даної помилки необхідно, щоб в регіональних налаштуваннях операційної системи (<strong>Панель управління - Мова і регіональні стандарти - Додатково</strong>) в поле <strong>Мови програм, що не підтримують Юнікод</strong> була обрана російська мова.</p></blockquote>
<ul><ul><li>Результат оновлення інформаційної бази записується в <strong>Журнал подій Windows</strong> (Event Log).<br></li></ul><li>Якщо в результаті нештатної ситуації при оновленні база виявилася заблокованою, то її можна розблокувати за допомогою консолі <strong>Адміністрування серверів платформи</strong>, або з командного рядка, запустивши платформу від імені адміністратора з ключем <strong>ДозволитиРоботуКористувачів</strong> і вказавши код розблокування <strong>ПакетнеОновленняКонфігураціїІБ</strong>. Наприклад:</li></ul><p class="SourceCode">"C:\Program Files\BAF\bin\1cv8.exe" ENTERPRISE /S"server\base" /N Адміністратор /P"" /WA /СДозволитиРоботуКористувачів/UCПакетнеОновленняКонфігураціїІБ</p>
<ul><li>Якщо оновлення конфігурації завершилося невдачею, а в тимчасовому log-файлі є запис: "Виняток у createConnection: Error, Automation server can't create object", то, швидше за все, використовується 32-розрядна компонента <strong>comcntr.dll</strong> на комп'ютері під керуванням 64-розрядної операційної системи. Для усунення даної проблеми необхідно взяти 64-розрядну компоненту <strong>comcntr.dll</strong> з поставки платформи x64 Сервер і зареєструвати її, запустивши з командного рядка:</li></ul><p class="SourceCode">regsvr32 &lt;каталог 64-розрядного comcntr.dll&gt;\comcntr.dll</p>
<p>З'ясувавши причини помилки, зробіть відповідні настройки комп'ютера і підключення до Інтернет, потім натисніть <strong>Далі </strong>для повторення спроби. </p>
<h3>Див. також:</h3>
<ul><li><a href="v8help://frame/form_common">Робота з формами</a>.</li></ul></body></html>