
// УстановитьФлажки()
//
&НаКлиенте
Процедура УстановитьФлажки(Команда)
			
	УстановитьПометкуСтрокТаблицы(Истина);  		
	
КонецПроцедуры // УстановитьФлажки()

// УстановитьПометкуСтрокДерева()
//
&НаКлиенте
Процедура УстановитьПометкуСтрокТаблицы(Пометка)
	
	Для Каждого Строка Из ТаблицаСтрокОтчета Цикл

		// по итоговыми и заголовочным строкам мы не меняем видимость
		Если    ВРЕГ(Строка.ТипСтроки) = "ЗАГ"
			ИЛИ ВРЕГ(Строка.ТипСтроки) = "ИТОГ"
			ИЛИ ВРЕГ(Строка.ТипСтроки) = "ОСН" Тогда
			
			Продолжить;
		
		КонецЕсли;
		
		Строка.ПоказатьСтроку = Пометка;

	КонецЦикла;

КонецПроцедуры // УстановитьПометкуСтрокДерева()

// СнятьФлажки()
//
&НаКлиенте
Процедура СнятьФлажки(Команда)
	
	УстановитьПометкуСтрокТаблицы(Ложь);
	
КонецПроцедуры // СнятьФлажки()

// ПриОткрытии()
//
&НаКлиенте
Процедура ПриОткрытии(Отказ)
	
	Элементы.УстановитьСнятьФлажки.Доступность = (ТаблицаСтрокОтчета.Количество() > 1);
	
КонецПроцедуры // ПриОткрытии()

// ДеревоПередНачаломДобавления()
//
&НаКлиенте
Процедура ТаблицаСтрокОтчетаПередНачаломДобавления(Элемент, Отказ, Копирование, Родитель, Группа)
	
	Отказ = Истина;
	
КонецПроцедуры // ДеревоПередНачаломДобавления()

// ДеревоПередУдалением()
//
&НаКлиенте
Процедура ТаблицаСтрокОтчетаПередУдалением(Элемент, Отказ)
	
	Отказ = Истина;
	
КонецПроцедуры // ДеревоПередУдалением()

// ПриИзмененииФлажка()
//
&НаКлиенте
Процедура ПриИзмененииФлажка(Элемент)
	
	ТекЭлемент  = СтрЗаменить(Элемент.ТекущийЭлемент.Имя, "ТаблицаСтрокОтчета", "");
	ТекЗначение = Элемент.ТекущиеДанные[ТекЭлемент];

 //////   ТекущаяСтрока = Элемент.ТекущаяСтрока;
 //////   
 //////   Если    ВРЕГ(ТекущаяСтрока.ТипСтроки) = "ЗАГ"
 //////   	ИЛИ ВРЕГ(ТекущаяСтрока.ТипСтроки) = "ИТОГ"
 //////   	ИЛИ ВРЕГ(ТекущаяСтрока.ТипСтроки) = "ОСН" Тогда
 //////   	
 //////   	// по итоговыми и заголовочным строкам мы не меняем видимость + по основным (временно?)
 //////   	ТекущаяСтрока.ПоказатьСтроку = Истина;
 //////   
 //////   КонецЕсли;
 //////
	
	
КонецПроцедуры // ПриИзмененииФлажка()

// ДеревоПриИзменении()
//
&НаКлиенте
Процедура ТаблицаСтрокОтчетаПриИзменении(Элемент)
	
	Модифицированность = Истина;
	
	ПриИзмененииФлажка(Элемент);
	
КонецПроцедуры // ДеревоПриИзменении()

&НаКлиенте
Процедура ПередЗакрытием(Отказ, СтандартнаяОбработка)
	
	СтандартнаяОбработка = Ложь;
	Если мПрограммноеЗакрытие = Истина Тогда
		Возврат;
	КонецЕсли;
	
	Если мСпрашиватьОСохранении <> Ложь И Модифицированность Тогда
		Отказ = Истина;
		ОписаниеОповещения = Новый ОписаниеОповещения("ПередЗакрытиемЗавершение", ЭтотОбъект);
		ПоказатьВопрос(ОписаниеОповещения, НСтр("ru='Настройки были изменены. Сохранить изменения?';uk='Настройки були змінені. Зберегти зміни?'"), РежимДиалогаВопрос.ДаНетОтмена);

	ИначеЕсли мСпрашиватьОСохранении <> Ложь И НЕ Модифицированность Тогда
		
		Возврат;
		
	Иначе
		
		#Если НЕ ВебКлиент Тогда
			Отказ = Истина;
		#КонецЕсли
		СохранитьДанные();

	КонецЕсли;
	
КонецПроцедуры

&НаКлиенте
Процедура ПередЗакрытиемЗавершение(Ответ, ДополнительныеПараметры) Экспорт
	
	Если Ответ = КодВозвратаДиалога.Нет Тогда
		Модифицированность = Ложь;
		Закрыть();
	ИначеЕсли Ответ = КодВозвратаДиалога.Да Тогда
		СохранитьДанные();
	КонецЕсли;
	
КонецПроцедуры

&НаКлиенте
Процедура СохранитьДанные()
	
	мПрограммноеЗакрытие = Истина;
	Закрыть(ТаблицаСтрокОтчета);
	
КонецПроцедуры // ПередЗакрытием()

